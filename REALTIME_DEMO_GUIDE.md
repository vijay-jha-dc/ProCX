# ProCX Real-Time Demo Guide

## Overview

This demo showcases ProCX's AI-powered proactive customer intervention system in real-time. It simulates a payment failure event and demonstrates how the 4 AI agents (Bodha, Dhyana, Niti, Karuna) work together to generate a personalized intervention.

## Components

### 1. Backend: `api/realtime_demo_api.py`

- **Purpose**: WebSocket server that runs the ProCX workflow and streams events
- **Port**: 5001
- **Technology**: Flask + Socket.IO
- **What it does**:
  - Creates a real Customer and CustomerEvent
  - Runs the actual ProCX workflow with GPT-4o agents
  - Emits real-time events to connected browsers

### 2. Frontend: `realtime_showcase.html`

- **Purpose**: Beautiful browser UI that displays the demo
- **Technology**: HTML + Alpine.js + Tailwind CSS
- **What it shows**:
  - Customer info (VIP, LTV, language)
  - Agent processing pipeline (4 agents)
  - Generated Tamil WhatsApp message
  - Processing time metrics
  - Live event timeline

## How to Run

### Step 1: Start the Demo Server

```bash
cd c:\Users\VijayJha\Documents\AgentMax-Hackathon\ProCX
python api/realtime_demo_api.py
```

You should see:

```
======================================================================
🚀 ProCX Real-Time Demo Server
======================================================================
📡 Server: http://localhost:5001
🎯 Demo: Payment Failure → AI Intervention (Real-time)
======================================================================
```

### Step 2: Open Browser

1. Open your browser (Chrome/Edge recommended)
2. Go to: `http://localhost:5001`
3. You'll see the ProCX Real-Time Showcase dashboard

### Step 3: Run the Demo

1. Click the **"Start Demo"** button in the top right
2. Watch as:
   - Payment failure is detected
   - Customer info is analyzed
   - 4 AI agents process the event
   - Tamil message is generated
   - Intervention is deployed
3. Processing takes ~15-30 seconds (real GPT-4o API calls)

## What You'll See

### Event Timeline (Right Panel)

Real-time events appear as they happen:

- 🚨 Payment Failure Detected
- 👤 Customer Identified
- 🤖 Agent 1: Context Analysis
- 🤖 Agent 2: Pattern Recognition
- 🤖 Agent 3: Decision Making
- 🤖 Agent 4: Message Generation
- 📝 Tamil Message Generated
- 🎯 Intervention Deployed

### Customer Info (Left Panel)

- Name: Tanya Kumar
- Segment: VIP
- LTV: $15,000
- Language: Tamil
- Loyalty: Platinum

### Generated Message (Left Panel)

Real Tamil WhatsApp message generated by GPT-4o:

- Empathetic tone
- Personalized for customer
- Includes discount offer (10%)
- Ready for deployment

### Metrics (Top Bar)

- Total Interventions: 1
- AI Agents Active: 4
- Processing Time: ~15-30s
- Live Status: Shows "Live Processing" when running

## Technical Details

### WebSocket Events

**Client → Server:**

- `start_demo`: Trigger demo execution

**Server → Client:**

- `connection_established`: Confirms connection
- `demo_started`: Demo has begun
- `demo_event`: Each step of the workflow
- `demo_completed`: Demo finished successfully
- `demo_error`: Error occurred

### Event Types

```javascript
{
  type: 'payment_failure' | 'customer_info' | 'agent_processing' |
        'message_preview' | 'intervention_ready' | 'processing_time',
  timestamp: '2025-10-26T10:30:00',
  event: 'Human-readable description',
  message: 'Additional details',
  // ... other fields
}
```

## Differences from Old Demo

### OLD (Confusing):

- `realtime_demo_api.py` ran `demo_realtime.py` as subprocess
- Parsed stdout with regex to extract events
- Complex, error-prone, hard to debug
- `realtime_showcase.html` had hardcoded simulation data

### NEW (Simple):

- `realtime_demo_api.py` runs ProCX workflow directly
- Emits clean WebSocket events
- Easy to debug, clean code
- `realtime_showcase.html` receives real-time events

## Troubleshooting

### Issue: "Demo is already running"

- **Solution**: Wait for current demo to complete (~30s)

### Issue: No events appearing

- **Check**: Browser console for WebSocket errors
- **Check**: Server terminal for error messages
- **Try**: Refresh page and restart server

### Issue: OpenAI API errors

- **Check**: `.env` file has valid `OPENAI_API_KEY`
- **Check**: API key has credits

### Issue: Socket.IO connection failed

- **Check**: Server is running on port 5001
- **Check**: Firewall not blocking port 5001
- **Try**: Use `localhost` instead of `0.0.0.0`

## Code Structure

```
api/realtime_demo_api.py
├── Flask app (serve HTML)
├── Socket.IO events (WebSocket)
├── run_payment_failure_demo()
│   ├── Create Customer + Event
│   ├── Call ProCX workflow
│   ├── Emit events to browser
│   └── Return result
└── Event handlers (connect, disconnect, start_demo)

realtime_showcase.html
├── Alpine.js component (realtimeShowcase)
├── WebSocket connection (Socket.IO)
├── Event handlers (demo_event, demo_completed)
├── UI rendering (timeline, metrics, message)
└── Toast notifications
```

## Next Steps

1. **Add More Scenarios**: Cart abandonment, order cancellation, etc.
2. **Real Customer Data**: Load from `data/memory/` JSON files
3. **Multiple Demos**: Queue multiple demos to run sequentially
4. **Export Results**: Download intervention as JSON
5. **A/B Testing**: Compare different agent strategies

## Notes

- This demo uses **real GPT-4o API calls** (not simulation)
- Each demo costs ~$0.02-0.05 in OpenAI credits
- Processing time varies (15-30s typically)
- Customer data is hardcoded in the demo (ID: C100924)

## Questions?

Check the main project docs:

- `docs/README.md` - Full ProCX documentation
- `docs/HACKATHON_DEMO.md` - Hackathon demo script
- `docs/SETUP.md` - Setup instructions
