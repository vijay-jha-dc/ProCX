<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ProCX Demo Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>
  <body
    class="bg-gray-900 text-white p-8"
    x-data="{ 
    socket: null, 
    demoRunning: false, 
    events: [],
    init() {
        console.log('Alpine initialized!');
        this.socket = io('http://localhost:5001');
        this.socket.on('connection_established', (data) => {
            console.log('Connected:', data);
        });
        this.socket.on('demo_event', (data) => {
            console.log('Event:', data);
            this.events.push(data);
        });
        this.socket.on('demo_started', () => {
            this.demoRunning = true;
        });
        this.socket.on('demo_completed', () => {
            this.demoRunning = false;
        });
    },
    startDemo() {
        console.log('Starting demo...');
        this.socket.emit('start_demo');
    }
}"
  >
    <h1 class="text-4xl font-bold mb-8">ProCX Real-Time Demo</h1>

    <button
      @click="startDemo()"
      :disabled="demoRunning"
      class="px-6 py-3 rounded-lg font-bold text-lg mb-8"
      :class="demoRunning ? 'bg-gray-600 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700'"
    >
      <span x-text="demoRunning ? 'Processing...' : 'START DEMO'"></span>
    </button>

    <div class="space-y-2">
      <h2 class="text-2xl font-bold">
        Events: <span x-text="events.length"></span>
      </h2>
      <template x-for="event in events" :key="event.timestamp">
        <div class="bg-gray-800 p-4 rounded">
          <div class="font-bold" x-text="event.type"></div>
          <div class="text-sm text-gray-400" x-text="event.event"></div>
        </div>
      </template>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  </body>
</html>
